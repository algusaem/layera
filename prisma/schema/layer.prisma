model Layer {
  id          String   @id @default(cuid())
  userId      String
  name        String   // e.g., "Summer Evening Combo"
  description String?
  isPublic    Boolean  @default(false) // Could allow sharing layers later
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  user     User           @relation(fields: [userId], references: [id], onDelete: Cascade)
  perfumes LayerPerfume[]

  @@map("layers")
}

model LayerPerfume {
  id        String @id @default(cuid())
  layerId   String
  perfumeId String
  order     Int    @default(0) // Order of application (base first, top last)

  layer   Layer   @relation(fields: [layerId], references: [id], onDelete: Cascade)
  perfume Perfume @relation(fields: [perfumeId], references: [id], onDelete: Cascade)

  @@unique([layerId, perfumeId]) // Same perfume can't be in a layer twice
  @@map("layer_perfumes")
}
